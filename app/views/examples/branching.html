{% extends "layout.html" %}

{% block page_title %}
  Example - Branching
{% endblock %}

{% block content %}
<main id="content" role="main">

  {% include "includes/breadcrumb_examples.html" %}

  <div class="grid-row">
    <div class="column-two-thirds">      

        <h1 class="heading-xlarge">
          Branching
        </h1>

        <p>
          You may want to show a user different pages, depending on how they've answered a question.
        </p>
        
        <p>
          You can make this happen by including <code class="code">value="redirect(&lt;URL&gt;)"</code> in your form inputs. For example:</URL>
        </p>

        <div class="code" style="width:110%">
  &lt;input type=&quot;radio&quot; name=&quot;work-status&quot; value=&quot;redirect(branch/employed)&quot;&gt;
  &lt;input type=&quot;radio&quot; name=&quot;work-status&quot; value=&quot;redirect(branch/self-employed)&quot;&gt;
  &lt;input type=&quot;radio&quot; name=&quot;work-status&quot; value=&quot;redirect(branch/director)&quot;&gt;
        </div>
        
        <form action="/examples/branching" method="get" class="form">
                  
          <div class="form-group">
            
            <h2 class="heading-medium">
              What is your employment status?
            </h2>          
            
            <fieldset class="">

              <legend class="visuallyhidden">What is your employment status?</legend>

              <label for="workStatusEmp" class="block-label">
                <input type="radio" name="work-status" value="redirect(branch/employed)" id="workStatusEmp">
                Employed
              </label>

              <label for="workStatusSelf" class="block-label">
                <input type="radio" name="work-status" value="redirect(branch/self-employed)" id="workStatusSelf">
                Self-employed
              </label>
              
              <label for="workStatusDir" class="block-label">
                <input type="radio" name="work-status" value="redirect(branch/director)" id="workStatusDir">
                Director of a limited company
              </label>

            </fieldset>
          </div>
          
          <div class="form-group">
            <input type="submit" class="button" value="Continue">
          </div>
        
        </form>
        
        <p>&nbsp;</p>
        
        <p>If you need more complex logic to determine which page to show next you can write server-side code to achieve this as in the following example:</p>
        
        <div class="code" style="margin-bottom:30px;">
  router.get('/examples/hoursperweek', function (req, res) {
    
    // get the answer from the query string (eg.?hours=20 )
    var hours = req.query.hours;
    
    if (hours >= 35) {
      
      // redirect to the relevant page
      res.redirect("/examples/branch/full-time");
      
    } else {
      
      // redirect to the relevant page
      res.redirect('/examples/branch/part-time');
      
    }
    
  });
        </div>
        
        <p class="form-hint">You can find this code in <span class="code">/app/routes.js</span> and see an example of it working below:</p>
        
        <form action="/examples/hoursperweek" method="get" class="form">

        <h2 class="heading-medium">
          How many hours per week do you work?
        </h2>

        <div class="form-group">
          <fieldset class="inline">

            <legend class="visuallyhidden">How many hours per week do you work?</legend>
            <input type="text" class="form-control" name="hours" value="" type="number" pattern="[0-9]*"/>

          </fieldset>
        </div>

        <div class="form-group">
          <input type="submit" class="button" value="Continue">
        </div>

      </form>

    </div>
  </div>
</main>
{% endblock %}
